(function(e){"use strict";e.fn.jFill=function(t){var n,r=this,i=e('<div class="jFill-slide" />'),s=e('<img class="jFill-image" />'),o=e('<div class="jFill-image-holder" />'),u=function(){},a=function(e,t){var n="",r=false,i=false,s="",o;for(o in e){if(e.hasOwnProperty(o)&&e[o].hasOwnProperty("src")){i=e[o].hasOwnProperty("lte_width");r=e[o].hasOwnProperty("gte_width");if(i){s=t.width<=e[o].lte_width?e[o].src:"";if(r){s=s.length&&t.width>=e[o].gte_width?e[o].src:""}}else if(r){s=t.width>=e[o].gte_width?e[o].src:""}else{n=e[o].src}if(s.length){break}}}return s===""?n:s},f=function(e,t){var n,u,f;t=t||false;if(typeof e!=="undefined"){n=i.clone(true);u=e;if(typeof u==="object"){f={height:r.height(),width:r.width()};e=a(u,f);n.data("sizes",u).data("srcs",[e])}if(typeof e==="string"){r.append(n.append(o.clone(true).append(s.clone(true).data("slide",n).data("deferred",t).attr("src",e))))}}},l=function(t,n){var r,i,s=function(t,n){n=n||false;return e.Deferred().done(function(){f(t,n)})},o=true;n=n||false;t=t.reverse();for(r in t){if(t.hasOwnProperty(r)){if(n){if(o){i=s(t[r]);o=false}else{i=s(t[r],i)}}else{f(t[r])}}}if(typeof i!=="undefined"){i.resolve()}},c=function(){var t=e(this).data("jfill_slides"),n;if(typeof t==="object"){for(n in t){if(t.hasOwnProperty(n)){t[n].trigger("resize_jfill")}}}},h=function(){var t=e(this),n={height:t.data("height"),width:t.data("width")},i=t.data("sizes"),s=t.data("srcs"),o={height:r.height(),width:r.width()},u=e("img",t),f={height:0,left:0,top:0,width:0},l=n.height/n.width,c=l>1,h={height:o.width*l,width:o.width},p={height:o.height,width:n.width*(o.height/n.height)},d=0,v="";if(c){f=p}else{if(o.height-n.height<o.width-n.width){f=p;if(f.width<o.width){f=h}}else{f=h;if(f.height<o.height){f=p}}}d=o.height-f.height;n.height=f.height;f.top=0;if(d<0){f.top=d/2;n.height=Math.abs(f.height-Math.abs(d))}d=o.width-f.width;n.width=f.width;f.left=0;if(d<0){f.left=d/2;n.width=Math.abs(f.width-Math.abs(d))}u.css(f);t.css(n);if(e.type(i)==="array"){v=a(i,{height:o.height,width:o.width});if(v!==u.attr("src")){u.attr("src",v);if(e.inArray(v,s)){t.trigger("resize_jfill")}else{s.push(v);t.data("srcs",s)}}}};r.css({overflow:"hidden"});i.css({overflow:"hidden"}).on({resize_jfill:h});s.css({position:"absolute"}).data("loaded",false).on({load:function(){var t=e(this),n=t.data("deferred"),i=t.data("slide"),s=r.data("jfill_slides");if(typeof i==="object"){i.data("height",t.height()).data("width",t.width()).trigger("resize_jfill");if(!t.data("loaded")){if(typeof s==="undefined"){s=[i]}else{s.push(i)}r.data("jfill_slides",s);t.data("loaded",true);if(typeof n==="object"){n.resolve()}u(t)}}}});o.css({position:"relative"});if(typeof t==="string"){l([t])}else if(typeof t==="object"){if(t.hasOwnProperty("images")&&e.type(t.images)==="array"){l(t.images,t.hasOwnProperty("lazy_load"));if(t.hasOwnProperty("event_binds")){if(typeof t.event_binds==="string"){this.bind(t.event_binds,c)}else if(e.type(t.event_binds)==="array"){for(n in t.event_binds){if(t.event_binds.hasOwnProperty(n)){this.bind(t.event_binds[n],c)}}}}if(t.hasOwnProperty("image_load_callback")){u=t.image_load_callback}}else{e.error("Missing/bad images key")}}else{e.error("Bad parameter passed to jQuery.jFill");return}return this}})(jQuery)